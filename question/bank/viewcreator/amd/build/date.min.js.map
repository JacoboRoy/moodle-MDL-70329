{"version":3,"sources":["../src/date.js"],"names":["addEventList","typeSelector","document","querySelector","addEventListener","e","target","dataset","filterfield","value","Templates","renderForPromise","then","html","parentNode","options","length","appendNodeContents","datePickerSetup","catch","typeorselec","querySelectorAll","jointype","preventDefault","console","log","element","modalForm","ModalForm","formClass","args","url","location","href","modalConfig","title","returnFocus","events","FORM_SUBMITTED","window","detail","show","init"],"mappings":"gLAuBA,OACA,O,sDAGMA,CAAAA,CAAY,CAAG,UAAM,CACvB,GAAMC,CAAAA,CAAY,CAAGC,QAAQ,CAACC,aAAT,CAAuB,iCAAvB,CAArB,CACAF,CAAY,CAACG,gBAAb,CAA8B,QAA9B,CAAwC,SAACC,CAAD,CAAO,CAC3C,GAAqC,MAAjC,GAAAA,CAAC,CAACC,MAAF,CAASC,OAAT,CAAiBC,WAAjB,EAA8D,MAAnB,GAAAH,CAAC,CAACC,MAAF,CAASG,KAAxD,CAA0E,CACtEC,UAAUC,gBAAV,CAA2B,mCAA3B,CAAgE,EAAhE,EACCC,IADD,CACM,WAAY,IAAVC,CAAAA,CAAU,GAAVA,IAAU,CACdR,CAAC,CAACC,MAAF,CAASQ,UAAT,CAAoBX,aAApB,CAAkC,yBAAlC,EAA6DY,OAA7D,CAAqEC,MAArE,CAA8E,CAA9E,CACAN,UAAUO,kBAAV,CAA6B,yBAA7B,CAAwDJ,CAAxD,CAA8D,EAA9D,EACAK,CAAe,EAalB,CAjBD,EAiBGC,KAjBH,CAiBS,UAAM,CAEd,CAnBD,CAoBH,CACJ,CAvBD,CAwBH,C,CAEKD,CAAe,CAAG,UAAM,IACpBE,CAAAA,CAAW,CAAGlB,QAAQ,CAACmB,gBAAT,CAA0B,2BAA1B,EAAuD,CAAvD,CADM,CAEpBC,CAAQ,CAAGpB,QAAQ,CAACC,aAAT,CAAuB,yBAAvB,CAFS,CAG1BiB,CAAW,CAAChB,gBAAZ,CAA6B,OAA7B,CAAsC,SAAAC,CAAC,CAAI,CACvCA,CAAC,CAACkB,cAAF,GACAC,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BH,CAA1B,EAFuC,GAGjCI,CAAAA,CAAO,CAAGrB,CAAC,CAACC,MAHqB,CAIjCqB,CAAS,CAAG,GAAIC,UAAJ,CAAc,CAE5BC,SAAS,CAAE,0CAFiB,CAI5BC,IAAI,CAAE,CACFC,GAAG,CAAEC,QAAQ,CAACC,IADZ,CAEFX,QAAQ,CAAEA,CAFR,CAJsB,CAS5BY,WAAW,CAAE,CACTC,KAAK,CAAE,QADE,CATe,CAa5BC,WAAW,CAAEV,CAbe,CAAd,CAJqB,CAqBvCC,CAAS,CAACvB,gBAAV,CAA2BuB,CAAS,CAACU,MAAV,CAAiBC,cAA5C,CAA4D,SAACjC,CAAD,QAAOkC,CAAAA,MAAM,CAACf,OAAP,CAAeC,GAAf,CAAmBpB,CAAC,CAACmC,MAArB,CAAP,CAA5D,EAEAb,CAAS,CAACc,IAAV,EACH,CAxBD,CAyBH,C,QAEmB,QAAPC,CAAAA,IAAO,EAAM,CACtB1C,CAAY,EACf,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Question bank filter managemnet.\n *\n * @module     qbank_viewcreator\n * @copyright  2021 Ghaly Marc-Alexandre <marc-alexandreghaly@catalyst-ca.net>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport ModalForm from 'core_form/modalform';\nimport Templates from 'core/templates';\n//import {getCalendarMonthData as getCalendarData} from 'core_calendar/repository';\n\nconst addEventList = () => {\n    const typeSelector = document.querySelector('[data-table-region=qbank-table]');\n    typeSelector.addEventListener('change', (e) => {\n        if (e.target.dataset.filterfield === 'type' && e.target.value === 'date') {\n            Templates.renderForPromise('qbank_viewcreator/filter_row_date', {})\n            .then(({html}) => {\n                e.target.parentNode.querySelector('[data-filterfield=join]').options.length = 0;\n                Templates.appendNodeContents('[data-filterfield=join]', html, '');\n                datePickerSetup();\n                // Get calendar data for calendar renderer.\n                // getCalendarData(year, month, courseId, categoryId, includeNavigation, mini)\n                // .then((context) => {\n                //     Templates.render('qbank_viewcreator/calendar', context)\n                //     .done((html) => {\n                //         Templates.replaceNodeContents('[data-filterregion=value]', html, '');\n                //     });\n                //     return;\n                // }).catch(() => {\n                //     return;\n                // });\n                return;\n            }).catch(() => {\n                return;\n            });\n        }\n    });\n};\n\nconst datePickerSetup = () => {\n    const typeorselec = document.querySelectorAll('[data-filterregion=value]')[0];\n    const jointype = document.querySelector('[data-filterfield=join]');\n    typeorselec.addEventListener('click', e => {\n        e.preventDefault();\n        console.log('JOINTYPe: ', jointype);\n        const element = e.target;\n        const modalForm = new ModalForm({\n            // Name of the class where form is defined (must extend \\core_form\\dynamic_form):\n            formClass: 'qbank_viewcreator\\\\form\\\\datepicker_form',\n            // Add as many arguments as you need, they will be passed to the form:\n            args: {\n                url: location.href,\n                jointype: jointype\n            },\n            // Pass any configuration settings to the modal dialogue, for example, the title:\n            modalConfig: {\n                title: 'simple'\n            },\n            // DOM element that should get the focus after the modal dialogue is closed:\n            returnFocus: element,\n        });\n        // Listen to events if you want to execute something on form submit.\n        // Event detail will contain everything the process() function returned:\n        modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, (e) => window.console.log(e.detail));\n        // Show the form.\n        modalForm.show();\n    });\n};\n\nexport const init = () => {\n    addEventList();\n};\n"],"file":"date.min.js"}