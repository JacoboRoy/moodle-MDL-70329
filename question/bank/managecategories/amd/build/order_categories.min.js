define ("qbank_managecategories/order_categories",["exports","core/ajax","core/notification","core/sortable_list","core/templates","jquery"],function(a,b,c,d,e,f){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=g(b);c=g(c);d=g(d);e=g(e);f=g(f);function g(a){return a&&a.__esModule?a:{default:a}}var h=function(a,b){new d.default(".category_list",{moveHandlerSelector:".list_item [data-drag-type=move]"});(0,f.default)(".list_item").on(d.default.EVENTS.DROP,function(c){c.stopPropagation();var d=(0,f.default)(".list_item").parent(),e=(0,f.default)("li.list_item[style]")[0].children[0].children[0].href,g=e.substr(e.search("\\?")),h=new URLSearchParams(g),i=h.get("cat"),l=i.substr(i.search(",")+1),m=i.substr(0,i.search(","));(0,f.default)("li.list_item[style]").remove();var n=k(d,l,m);j(JSON.stringify(n),a,b)})},i=function(a){e.default.render("qbank_managecategories/category",a).done(function(a){(0,f.default)("#categoriesrendered").replaceWith(a)})},j=function(a,d,e){var f=b.default.call([{methodname:"qbank_managecategories_set_category_order",args:{categories:a,data:d,cmid:e},fail:c.default.exception}]);f[0].done(function(a){var b=JSON.parse(a),c={categoriesrendered:b,items:b.items};console.log(b);i(c)})},k=function(a,b,c){for(var d=b+" "+c,e=[],f=[],g=0;g<a.length;g++){for(var h=a[g].querySelectorAll("li.list_item"),k=[],l=0;l<h.length;l++){var m=h[l].children[0].children[0].href,n=m.substr(m.search("\\?")),o=new URLSearchParams(n),p=o.get("cat"),q=p.substr(p.search(",")+1);p=p.substr(0,p.search(","));k[l]=q+" "+p;if(k[l]===d){f.push(k)}}e[g]=k}f=f[0];f=f.filter(function(a){return a!==d});return[e,f[0],d]};a.init=function init(a,b){h(a,b)}});
//# sourceMappingURL=order_categories.min.js.map
