{"version":3,"sources":["../src/addcategory_dialogue.js"],"names":["displayModal","selector","contextid","cmid","trigger","ModalFactory","create","title","Str","get_string","body","getBody","large","done","modal","getRoot","on","ModalEvents","hidden","setBody","e","submitFormAjax","hide","preventDefault","stopPropagation","load","params","JSON","stringify","htmlBody","Fragment","loadFragment","formData","find","serialize","Ajax","call","methodname","args","jsonformdata","fail","Notification","exception","initModal"],"mappings":"6jBAwBA,OACA,OACA,OACA,OACA,OACA,OACA,O,4lBAEMA,CAAAA,CAAY,CAAG,SAACC,CAAD,CAAWC,CAAX,CAAsBC,CAAtB,CAA+B,CAChD,GAAIC,CAAAA,CAAO,CAAG,cAAEH,CAAF,CAAd,CACAI,UAAaC,MAAb,CAAoB,CAClBC,KAAK,CAAEC,CAAG,CAACC,UAAJ,CAAe,aAAf,CAA8B,UAA9B,CADW,CAElBC,IAAI,CAAEC,CAAO,CAACT,CAAD,CAAYC,CAAZ,CAFK,CAGlBS,KAAK,GAHa,CAApB,CAIGR,CAJH,EAKCS,IALD,CAKM,SAACC,CAAD,CAAW,CAEfA,CAAK,CAACC,OAAN,GAAgBC,EAAhB,CAAmBC,UAAYC,MAA/B,CAAuC,UAAM,CAC3CJ,CAAK,CAACK,OAAN,CAAcR,CAAO,CAACT,CAAD,CAAYC,CAAZ,CAArB,CACD,CAFD,EAGAW,CAAK,CAACC,OAAN,GAAgBC,EAAhB,CAAmB,QAAnB,CAA6B,MAA7B,CAAqC,SAACI,CAAD,CAAO,CAC1CC,CAAc,CAACP,CAAD,CAAd,CACAA,CAAK,CAACQ,IAAN,GACAF,CAAC,CAACG,cAAF,GACAH,CAAC,CAACI,eAAF,GACA,cAAE,qBAAF,EAAyBC,IAAzB,CAA8B,0BAA9B,CAED,CAPD,CAQD,CAlBD,CAmBH,C,CAEKd,CAAO,CAAG,SAACT,CAAD,CAAYC,CAAZ,CAAqB,IAC7BuB,CAAAA,CAAM,CAAG,CAACvB,IAAI,CAAEwB,IAAI,CAACC,SAAL,CAAezB,CAAf,CAAP,CADoB,CAE7B0B,CAAQ,CAAGC,UAASC,YAAT,CAAsB,wBAAtB,CAAgD,mBAAhD,CAAqE7B,CAArE,CAAgFwB,CAAhF,CAFkB,CAGjC,MAAOG,CAAAA,CACV,C,CAEKR,CAAc,CAAG,SAACP,CAAD,CAAW,CAChC,GAAIkB,CAAAA,CAAQ,CAAIlB,CAAK,CAACC,OAAN,GAAgBkB,IAAhB,CAAqB,MAArB,EAA6BC,SAA7B,EAAhB,CACAC,UAAKC,IAAL,CAAU,CAAC,CACTC,UAAU,CAAE,iDADH,CAETC,IAAI,CAAE,CAACC,YAAY,CAAEZ,IAAI,CAACC,SAAL,CAAeI,CAAf,CAAf,CAFG,CAGTQ,IAAI,CAAEC,UAAaC,SAHV,CAAD,CAAV,CAKD,C,aAEwB,QAAZC,CAAAA,SAAY,CAAC1C,CAAD,CAAWC,CAAX,CAAsBC,CAAtB,CAA+B,CACpDH,CAAY,CAACC,CAAD,CAAWC,CAAX,CAAsBC,CAAtB,CACf,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript for report card display and processing.\n *\n * @package    qbank_managecategories\n * @author     Ghaly Marc-Alexandre <marc-alexandreghaly@catalyst-ca.net>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n*/\n\nimport $ from 'jquery';\nimport * as Str from 'core/str';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport Fragment from 'core/fragment';\nimport Ajax from'core/ajax';\nimport Notification from 'core/notification';\n\nconst displayModal = (selector, contextid, cmid) => {\n    let trigger = $(selector);\n    ModalFactory.create({\n      title: Str.get_string('addcategory', 'question'),\n      body: getBody(contextid, cmid),\n      large: true,\n    }, trigger)\n    .done((modal) => {\n      // Do what you want with your new modal.\n      modal.getRoot().on(ModalEvents.hidden, () => {\n        modal.setBody(getBody(contextid, cmid));\n      });\n      modal.getRoot().on('submit', 'form', (e) => {\n        submitFormAjax(modal);\n        modal.hide();\n        e.preventDefault();\n        e.stopPropagation();\n        $('.questioncategories').load(' .questioncategories > *');\n        //$('head').load(document.URL);\n      });\n    });\n};\n\nconst getBody = (contextid, cmid) => {\n    let params = {cmid: JSON.stringify(cmid)};\n    let htmlBody = Fragment.loadFragment('qbank_managecategories', 'new_category_form', contextid, params);\n    return htmlBody;\n};\n\nconst submitFormAjax = (modal) => {\n  let formData =  modal.getRoot().find('form').serialize();\n  Ajax.call([{\n    methodname: 'qbank_managecategories_submit_add_category_form',\n    args: {jsonformdata: JSON.stringify(formData)},\n    fail: Notification.exception\n  }]);\n};\n\nexport const initModal = (selector, contextid, cmid) => {\n    displayModal(selector, contextid, cmid);\n};"],"file":"addcategory_dialogue.min.js"}