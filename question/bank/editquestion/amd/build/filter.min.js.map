{"version":3,"sources":["../src/filter.js"],"names":["init","filterRegionId","defaultcourseid","defaultcategoryid","CoreFilter","filterdata","pendingPromise","applyFilter","courseid","values","toString","categories","qtagids","promises","ajax","call","methodname","args","category","qperpage","qbshowtext","recurse","showhidden","done","response","questionscontainer","document","getElementById","html","innerHTML","resolve"],"mappings":"ycAuBA,OACA,uD,siBASO,GAAMA,CAAAA,CAAI,CAAG,SAACC,CAAD,CAAiBC,CAAjB,CAAkCC,CAAlC,CAAwD,CACxEC,CAAU,CAACJ,IAAX,CAAgBC,CAAhB,CAAgC,YAAhC,CAA8C,SAASI,CAAT,CAAqBC,CAArB,CAAqC,CAC/EC,CAAW,CAACF,CAAD,CAAaC,CAAb,CACd,CAFD,EAUA,GAAMC,CAAAA,CAAW,CAAG,SAACF,CAAD,CAAaC,CAAb,CAAgC,CAChD,GAAID,CAAJ,CAAgB,IACRG,CAAAA,CAAQ,CAAGH,CAAU,SAAV,CAAuBI,MAAvB,CAA8BC,QAA9B,EADH,CAERC,CAAU,CAAGN,CAAU,SAAV,CAAyBA,CAAU,SAAV,CAAuBI,MAAvB,CAA8BC,QAA9B,EAAzB,CAAoE,EAFzE,CAGRE,CAAO,CAAGP,CAAU,IAAV,CAAoBA,CAAU,IAAV,CAAkBI,MAAlB,CAAyBC,QAAzB,EAApB,CAA0D,EAC3E,CAJD,IAIO,IACCF,CAAAA,CAAQ,CAAGN,CADZ,CAECS,CAAU,CAAGR,CAFd,CAGCS,CAAO,CAAG,EACjB,CAT+C,GAgB5CC,CAAAA,CAAQ,CAAGC,UAAKC,IAAL,CAAU,CAAC,CACtBC,UAAU,CAAE,kBADU,CACUC,IAAI,CAAE,CAC9BT,QAAQ,CAAEA,CADoB,CAE9BU,QAAQ,CAAEP,CAFoB,CAG7BC,OAAO,CAAEA,CAHoB,CAI9BO,QAAQ,GAJsB,CAKhCC,UAAU,GALsB,CAM7BC,OAAO,GANsB,CAOhCC,UAAU,GAPsB,CADhB,CAAD,CAAV,CAhBiC,CA6BhDT,CAAQ,CAAC,CAAD,CAAR,CAAYU,IAAZ,CAAiB,SAASC,CAAT,CAAmB,IAC5BC,CAAAA,CAAkB,CAAGC,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,CADO,CAE5BC,CAAI,CAAG,2EAAyEJ,CAAQ,CAACI,IAAlF,CAAyF,QAFpE,CAGhCH,CAAkB,CAACI,SAAnB,CAA+BD,CAA/B,CACA,GAAItB,CAAJ,CAAoB,CAChBA,CAAc,CAACwB,OAAf,EACH,CACJ,CAPD,CASH,CAtCD,CAwCAvB,CAAW,EACd,CApDM,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Question bank filter managemnet.\n *\n * @module     qbank_editquestion/filter\n * @copyright  2021 Tomo Tsuyuki <tomotsuyuki@catalyst-au.net>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as CoreFilter from 'core/filter';\nimport ajax from 'core/ajax';\n\n/**\n * Initialise the question bank filter on the element with the given id.\n *\n * @param {String} filterRegionId\n * @param {String} courseid\n * @param {String} defaultcategoryid\n */\nexport const init = (filterRegionId, defaultcourseid, defaultcategoryid) => {\n    CoreFilter.init(filterRegionId, 'QbankTable', function(filterdata, pendingPromise) {\n        applyFilter(filterdata, pendingPromise);\n    });\n\n    /**\n     * Retrieve table data.\n     *\n     * @param {Object} filter data\n     * @param {Promise} filter pending promise\n     */\n    const applyFilter = (filterdata, pendingPromise) => {\n        if (filterdata) {\n            var courseid = filterdata['courseid'].values.toString();\n            var categories = filterdata['category'] ? filterdata['category'].values.toString() : '';\n            var qtagids = filterdata['tag'] ? filterdata['tag'].values.toString() : '';\n        } else {\n            var courseid = defaultcourseid;\n            var categories = defaultcategoryid;\n            var qtagids = '';\n        }\n\n        var qperpage = 10;\n        var qbshowtext = false;\n        var recurse = false;\n        var showhidden = false;\n\n        var promises = ajax.call([{\n            methodname: 'core_qbank_dummy', args: {\n                    courseid: courseid,\n                    category: categories,\n                     qtagids: qtagids,\n                    qperpage: qperpage,\n                  qbshowtext: qbshowtext,\n                     recurse: recurse,\n                  showhidden: showhidden\n                }\n            }\n        ]);\n\n        promises[0].done(function(response) {\n            var questionscontainer = document.getElementById('questionscontainer');\n            var html = '<div className=\"categoryquestionscontainer\" id=\"questionscontainer\">' + response.html + '</div>';\n            questionscontainer.innerHTML = html;\n            if (pendingPromise) {\n                pendingPromise.resolve();\n            }\n        });\n\n    };\n\n    applyFilter();\n};\n\n"],"file":"filter.min.js"}