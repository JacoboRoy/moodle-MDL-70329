define ("core_question/dd_categories",["exports","core/ajax","core/notification","core/sortable_list","jquery"],function(a,b,c,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=f(b);c=f(c);d=f(d);e=f(e);function f(a){return a&&a.__esModule?a:{default:a}}var g=function(){new d.default(".category_list",{moveHandlerSelector:".list_item"});(0,e.default)(".list_item").on(d.default.EVENTS.DROP,function(){var a=(0,e.default)(".list_item").parent(),b=(0,e.default)("li.list_item[style]")[0].children[0].children[0].href,c=b.substr(b.search("\\?")),d=new URLSearchParams(c),f=d.get("cat"),g=parseInt(f.substr(f.search(",")+1)),j=parseInt(f.substr(0,f.search(",")));(0,e.default)("li.list_item[style]").remove();var k=i(a,g,j);h(JSON.stringify(k))})},h=function(a){var d=b.default.call([{methodname:"core_question_set_category_order",args:{categories:a},fail:c.default.exception}]);d[0].then(function(a){return console.log(JSON.parse(a))})},i=function(a,b,c){for(var d=b.toString()+" "+c.toString(),e=[],f=[],g=0;g<a.length;g++){for(var h=a[g].querySelectorAll("li.list_item"),k=[],l=0;l<h.length;l++){var m=h[l].children[0].children[0].href,n=m.substr(m.search("\\?")),o=new URLSearchParams(n),p=o.get("cat"),q=parseInt(p.substr(p.search(",")+1));p=parseInt(p.substr(0,p.search(",")));k[l]=q.toString()+" "+p.toString()}e[g]=k;f[g]=k.filter(function(a){return a!==d})}console.log("newCatOrder: ",e);console.log("newCtxCat: ",f);var r=f.filter(function(a){return-1==e.indexOf(a)});console.log("diff : ",r);return e};a.init=function init(){g()}});
//# sourceMappingURL=dd_categories.min.js.map
