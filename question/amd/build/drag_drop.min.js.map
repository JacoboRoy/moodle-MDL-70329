{"version":3,"sources":["../src/drag_drop.js"],"names":["draggables","document","querySelectorAll","containers","forEach","draggable","addEventListener","classList","add","style","opacity","remove","callphpfunc","container","e","preventDefault","afterElement","getDragAfterElement","clientY","querySelector","appendChild","insertBefore","y","draggableElements","reduce","closest","child","box","getBoundingClientRect","offset","top","height","element","Number","NEGATIVE_INFINITY","ajcall","Ajax","call","methodname","arg","order","console","log","init","window"],"mappings":"oJAwBA,uD,ovBAEMA,CAAAA,CAAU,CAAGC,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,C,CACbC,CAAU,CAAGF,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,C,CAEnBF,CAAU,CAACI,OAAX,CAAmB,SAAAC,CAAS,CAAI,CAC5BA,CAAS,CAACC,gBAAV,CAA2B,WAA3B,CAAwC,UAAM,CAC1CD,CAAS,CAACE,SAAV,CAAoBC,GAApB,CAAwB,UAAxB,EACAH,CAAS,CAACE,SAAV,CAAoBC,GAApB,CAAwB,QAAxB,EACAH,CAAS,CAACI,KAAV,CAAgBC,OAAhB,CAA0B,KAC7B,CAJD,EAMAL,CAAS,CAACC,gBAAV,CAA2B,SAA3B,CAAsC,UAAM,CACxCD,CAAS,CAACE,SAAV,CAAoBI,MAApB,CAA2B,UAA3B,EACAN,CAAS,CAACE,SAAV,CAAoBI,MAApB,CAA2B,QAA3B,EACAN,CAAS,CAACI,KAAV,CAAgBC,OAAhB,CAA0B,IAA1B,CACAE,CAAW,EACd,CALD,CAMH,CAbD,EAeAT,CAAU,CAACC,OAAX,CAAmB,SAAAS,CAAS,CAAI,CAC5BA,CAAS,CAACP,gBAAV,CAA2B,UAA3B,CAAuC,SAAAQ,CAAC,CAAI,CACxCA,CAAC,CAACC,cAAF,GADwC,GAElCC,CAAAA,CAAY,CAAGC,CAAmB,CAACJ,CAAD,CAAYC,CAAC,CAACI,OAAd,CAFA,CAGlCb,CAAS,CAAGJ,QAAQ,CAACkB,aAAT,CAAuB,WAAvB,CAHsB,CAIxC,GAAI,CAACH,CAAL,CAAmB,CACfH,CAAS,CAACO,WAAV,CAAsBf,CAAtB,CAEH,CAHD,IAGO,CACHQ,CAAS,CAACQ,YAAV,CAAuBhB,CAAvB,CAAkCW,CAAlC,CACH,CACJ,CAVD,CAWH,CAZD,E,GAcMC,CAAAA,CAAmB,CAAG,SAACJ,CAAD,CAAYS,CAAZ,CAAkB,CAC9C,GAAMC,CAAAA,CAAiB,GAAQV,CAAS,CAACX,gBAAV,CAA2B,sBAA3B,CAAR,CAAvB,CAEA,MAAOqB,CAAAA,CAAiB,CAACC,MAAlB,CAAyB,SAACC,CAAD,CAAUC,CAAV,CAAoB,IAC1CC,CAAAA,CAAG,CAAGD,CAAK,CAACE,qBAAN,EADoC,CAE1CC,CAAM,CAAGP,CAAC,CAAGK,CAAG,CAACG,GAAR,CAAcH,CAAG,CAACI,MAAJ,CAAa,CAFM,CAGhD,GAAa,CAAT,CAAAF,CAAM,EAAQA,CAAM,CAAGJ,CAAO,CAACI,MAAnC,CAA0C,CACtC,MAAO,CAACA,MAAM,CAAGA,CAAV,CAAkBG,OAAO,CAAEN,CAA3B,CACV,CAFD,IAEO,CACH,MAAOD,CAAAA,CACV,CACJ,CARM,CAQJ,CAACI,MAAM,CAAEI,MAAM,CAACC,iBAAhB,CARI,EAQgCF,OACtC,C,CAEKpB,CAAW,CAAG,UAAM,CACtB,GAAMuB,CAAAA,CAAM,CAAGC,UAAKC,IAAL,CAAU,CAAC,CACtBC,UAAU,CAAE,8BADU,CAEtBC,GAAG,CAAE,CACDC,KAAK,CAAE,EADN,CAFiB,CAAD,CAAV,CAAf,CAMAC,OAAO,CAACC,GAAR,CAAYP,CAAZ,CACH,C,QAEmB,QAAPQ,CAAAA,IAAO,EAAM,CACtBC,MAAM,CAACH,OAAP,CAAeC,GAAf,CAAmB,sBAAnB,CACH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript for report card display and processing.\n *\n * @package    qbank_settingspage\n * @author     Ghaly Marc-Alexandre <marc-alexandreghaly@catalyst-ca.net>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n*/\n\nimport Ajax from 'core/ajax';\n\nconst draggables = document.querySelectorAll('.item');\nconst containers = document.querySelectorAll('.list');\n\ndraggables.forEach(draggable => {\n    draggable.addEventListener('dragstart', () => {\n        draggable.classList.add('dragging');\n        draggable.classList.add('active');\n        draggable.style.opacity = '0.5';\n    });\n\n    draggable.addEventListener('dragend', () => {\n        draggable.classList.remove('dragging');\n        draggable.classList.remove('active');\n        draggable.style.opacity = null;\n        callphpfunc();\n    });\n});\n\ncontainers.forEach(container => {\n    container.addEventListener('dragover', e => {\n        e.preventDefault();\n        const afterElement = getDragAfterElement(container, e.clientY);\n        const draggable = document.querySelector('.dragging');\n        if (!afterElement) {\n            container.appendChild(draggable);\n\n        } else {\n            container.insertBefore(draggable, afterElement);\n        }\n    });\n});\n\nconst getDragAfterElement = (container, y) => {\nconst draggableElements  = [...container.querySelectorAll('.item:not(.dragging)')];\n\nreturn draggableElements.reduce((closest, child) => {\n    const box = child.getBoundingClientRect();\n    const offset = y - box.top - box.height / 2;\n    if (offset < 0 && offset > closest.offset){\n        return {offset : offset, element: child};\n    } else {\n        return closest;\n    }\n}, {offset: Number.NEGATIVE_INFINITY}).element;\n};\n\nconst callphpfunc = () => {\n    const ajcall = Ajax.call([{\n        methodname: 'qbank_settingspage_get_order',\n        arg: {\n            order: 52\n        },\n    }]);\n    console.log(ajcall);\n};\n\nexport const init = () => {\n    window.console.log('we have been started');\n};"],"file":"drag_drop.min.js"}